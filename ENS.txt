U层:工具

CircularQueue:循环队列，防止同时读写
--([size])
--Write(data)
--Read(out data)
--Empty()
--Full()
KeyLibrary:针对关键信息的类，在确认对方收到后才会停止发送关键信息，并会在一定事件内忽略刚刚接收到的关键信息
--Add(data)
--OnRecvData(data,out skip,out t_data)
--Update():List<string>
--Clear()
Trigger:将事件在任意时刻存储，并在指定的时刻触发
--SetTrigger([T action])
--InMainThread()
--operator +(Trigger,action)
Format:处理格式
--Combine(CircularQueue,separator):string
--Split(originData,separator)
--GetBytes(s):byte[]
--GetString(bytes,[start,length]):string
--ListToString(list,char):string
--StringToList(string,char):List<int>
--EnFormat(string):string>>为了防止信息不完整，会在每个信息结尾添加标识
--DeFormat(s,out rightFormat):string



W层：包装协议，将不同协议的方法统一

传输内容不能包含Separator(默认为 * )

设置：
Protocol.BufferLength：Wrapper接收时字节数组的长度
Protocol.Separator：Wrapper信息收发时合并时的分隔符
Protocol.Mode：多线程或异步
事件：(会因协议而异)
OnClientConnectFailed(ProtocolBase)>>Client
OnClientReceiveFailed(ProtocolBase)>>Client
OnClientSendFailed(ProtocolBase)>>Client
OnServerReceiveFailed(ProtocolBase)>>Connection
OnServerSendFailed(ProtocolBase)>>Connection


Protocol:负责管理此层，需要不断刷新
--static Update()
ProtocolBase:有信息收发的抽象类
--Init(ip,port)
--SendData(data)
--RecvData():CircularQueue
--Dispose()
ListenerBase:开始/结束侦听
--(ip,port)
--StartListening()
--EndListening()
--Broadcast(data,[ignore])
--PTP(data,target/targets)
--Dispose()
Wrapper:包装ProtocolBase，传入一个client(如TcpClient)，实现基类的抽象方法
--Init(client)>>client会因协议而异
--SendData(data)
--RecvData():CircularQueue
--Dispose()
Client:进一步包装Wrapper，能够创建client
--Init(ip,port)
--SendData(data)
--RecvData():CircularQueue
--Dispose()
Connection:服务器端接收到连接后创建，负责和对应的客户端通信
--Init(client,server,index)
--SendData(data)
--RecvData():CircularQueue
--Dispose()
Listener:针对单一协议的侦听，能够获取接收到的client
--(ip,port)
--StartListening()
--EndListening()
--Broadcast(data,[ignore])
--PTP(data,target/targets)
--Dispose()
Host:特殊的Connection，直接和本地的Client通信(无网络行为)
--CreateHost(Server,out host):LocalClient
--SendData(data)
--RecvData():CircularQueue
--Dispose()
LocalClient:特殊的Client，直接和本地的Host通信(无网络行为)
--SendData(data)
--RecvData():CircularQueue
--Dispose()


E层：提供基础的连接事件和心跳检测

设置：
ENCInstance.ENCCorrespondent.IP：IP地址
ENCInstance.ENCCorrespondent.Port：端口
ENCInstance.ENCCorrespondent.recvMode：多线程或异步接收(会在Awake时同步至W层)
ENCInstance.ENCCorrespondent.KeyExistTime：关键信息忽略时长
ENCInstance.ENCCorrespondent.KeySendInterval：未确认的关键信息发送时长
ENCInstance.ENCCorrespondent.RKeyExistTime：返回的关键信息忽略时长
ENCHeartBeat.DisconnectThreshold：断开连接的时间阈值
ENCHeartBeat.HeartbeatMsgInterval：发送心跳检测的间隔
事件：
OnClientConnect(id)>>服务器侦听到新的连接后广播事件
OnClientDisconnect(id)>>和客户端的心跳检测超时
OnServerConnect(id)>>连接后服务器发送id，收到后调用
OnServerDisconnect()>>和服务器的心跳检测超时
OnConnectFailed() -> W:OnClientConnectFailed
ServerRecvData(string,ENCConnection)
ClientRecvData(string)

ENCServer:服务器端，会持有连接
--(port)>>IP=Any
--StartListening()
--EndListening()
--Broadcast(data,[ignore])
--PTP(data,target/targets)
--ShutDown()
ENCConnection：连接，和每个客户端对应
--(w_client,ENCServer,index)
--SendData(data)
--ShutDown()
ENCClient：负责客户端和服务器端的通信
--(w_client,ENCServer,index)
--SendData(data)
--ShutDown()
ENCHeartBeat：负责检查连接是否还生效，会不断发送小型数据包，并断开长期没有消息的连接(用户不需要单独调用)
--ServerUpdate()
--ClientUpdate()
ENCHost:特殊的Connection，直接和本地的Client通信(无网络行为)
--Create(out ENCHost,out ENCLocalClient)
--SendData(data)
--ShutDown()
ENCLocalClient:特殊的Client，直接和本地的Host通信(无网络行为)
--SendData(data)
--ShutDown()




N层:增加网络物体生成与管理功能

传输内容不能包含#
带参数的物体创建的参数内容不能包含 %

id:
=0：未分配id，会在Start中自动读取<0的id
1e9+：Spawner中未生成的预制体的标识(id来自NOMSpawner)
<0：初始化时自动分配id的物体(id来自NOMInstance)
>0：运行时生成的网络物体(id来自NOMServer)


NOMBehaviour:提供了网络行为的脚本
--StreamUpdate()>>同Update，但每帧内在发送消息前一刻执行
--CallFuncRpc(funcName,mode{-1全部,-2忽略自身}/targets,[param],[KeyFormatType])
NOMBehaviourCollection:管理每个由多个NOMBehaviour组成的网络物体
--Init(data)>>生成物体时调用
--Respawn(data)>>重新生成物体时调用
NOMSpawner:管理网络物体生成
--CreateServerRpc(id,mode{-1全部,-2忽略自身}/targets,[param],[KeyFormatType])



S层：提供房间管理功能









